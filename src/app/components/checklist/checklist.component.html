<div class="checklist-container">
  <app-environment-indicator></app-environment-indicator>
  <header class="header">
    <button class="back-btn" (click)="goBack()">‚Üê Kembali</button>
    <h1>Checklist Kendaraan (KELUAR)</h1>
  </header>

  <main class="checklist-content">
    <div class="checklist-card out-trip">
      <!-- Trip Header Info -->
      <div class="trip-header-info">
        <div class="trip-number-display">
          <span class="trip-label">Nomor SPK:</span>
          <span class="trip-value">{{ tripNumber }}</span>
        </div>
        <div class="plate-number-display">
          <span class="plate-label">Plat Nomor:</span>
          <span class="plate-value">{{ plateNumber }}</span>
        </div>
      </div>

      <div class="vehicle-info">
        <h2>üöö Checklist Sebelum Berangkat</h2>
        <div class="info-grid aligned">
          <span class="label">Jenis:</span>
          <span class="value out-badge type-value">{{ tripType === 'OUT' ? 'Keluar' : 'Masuk' }}</span>
        </div>
      </div>

      <div class="progress-section">
        <div class="progress-header">
          <h3>Progres Checklist</h3>
          <span class="progress-text">{{ completedCount }} / {{ totalCount }} selesai</span>
        </div>
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="(completedCount / totalCount) * 100"
          ></div>
        </div>
      </div>

      <form (ngSubmit)="onSubmit()" class="checklist-form">
        <div class="checklist-items">
          <div 
            *ngFor="let item of checklistItems" 
            class="checklist-item"
            [class.required]="item.required"
          >
            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="item.checked"
                [name]="item.id"
              />
              <span class="checkmark"></span>
              <span class="item-text">
                {{ item.label }}
                <span *ngIf="item.required" class="required-mark">*</span>
              </span>
            </label>
          </div>
        </div>

        <div class="form-actions">
          <div class="required-notice" *ngIf="!requiredItemsCompleted">
            <span class="warning-icon">‚ö†Ô∏è</span>
            Semua item wajib (*) harus dicentang sebelum melanjutkan
          </div>
          
          <button 
            type="submit" 
            class="continue-btn"
            [disabled]="!requiredItemsCompleted"
          >
            Lanjut ke Odometer
          </button>
        </div>
      </form>
    </div>
  </main>
</div>
